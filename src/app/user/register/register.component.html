
<main id="register">
    <div class="auth-container">
        <h1 class="auth-title">Register</h1>
        <form class="auth-form" [formGroup]="form" (ngSubmit)="register()" method="post">
            <input type="text" name="username" placeholder="Username" required formControlName="username">

            @if (form.get('username')?.touched) {
            <div>
                @if (form.get('username')?.errors?.['required']) {
                <div class="error">Username is required</div>
                }
                @if (form.get('username')?.errors?.['minlength']) {
                <div class="error">Username must be longer than 5 char</div>
                }
            </div>
            }
            <input type="email" name="email" placeholder="Email" required formControlName="email">

            @if (form.get('email')?.touched) {
            <div>
                @if (form.get('email')?.errors?.['required']) {
                <div class="error">Email is required</div>
                }
                @if (form.get('email')?.errors?.['pattern']) {
                <div class="error">Email is not valid</div>
                }
            </div>
            }
            <form class="auth-form" formGroupName="passGroup">
                <input type="password" name="password" placeholder="Password" required formControlName="password">
                @if (form.get('passGroup')?.get('password')?.touched) {
                <div>
                    @if (form.get('passGroup')?.get('password')?.errors?.['required']) {
                    <div class="error">Password is required</div>
                    }
                    @if (form.get('passGroup')?.get('password')?.errors?.['minlength']) {
                    <div class="error">Password must be longer than 3 char</div>
                    }
                </div>
                }

            <input type="password" name="rePassword" placeholder="Confirm Password" required
                    formControlName="rePassword">

                @if (form.get('passGroup')?.get('rePassword')?.touched) {
                <div>
                    @if (form.get('passGroup')?.errors?.['matchPasswordValidator']) {
                    <div class="error">Passwords don't match</div>
                    }
                </div>
                }

            </form>
            @if (errorMessage) {
                <div class="error">{{errorMessage}}</div>
            }
            <button mat-raised-button [disabled]='form.invalid'>Register</button>
        </form>
        <p class="login">Already have an account? <a routerLink="/login" style="color: black">Login here</a></p>
    </div>
</main>